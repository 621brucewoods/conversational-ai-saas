
# Conversational AI SaaS App | Geopatial Analysis

Next.js 15 application providing a chatbot-like user interface for performing remote-sensing-based geospatial analyses. It leverages Google Earth Engine (GEE) in the backend to process and analyze various remote sensing datasets in real time. Users can upload their own vector data, run advanced geospatial queries, and integrate the results with an AI Assistant for specialized tasks such as **land cover mapping**, **change detection**, and **air pollutant monitoring**. 


## Table of Contents

- [Features](#features-)
- [Tech Stack](#tech-stack-)
- [Getting Started](#getting-started-)
- [Current Analyses](#available-geospatial-analyses-)
- [Considerations](#considerations)

---

## Features âœ¨

1. **Chat-Style Interface**

   - Interact with the system using natural language.
   - The AI Assistant can execute various **geospatial functions** on your behalf.

2. **Google Earth Engine Integration**

   - Real-time access to satellite imagery and remote sensing datasets.
   - Seamless backend processing for large-scale geospatial computations.

3. **Import Your Own Vector Data**

   - Upload and manage personal vector layers.
   - Integrate your data with Earth Engine operations for advanced queries.

4. **Analysis Toolkit**

   - **Air Pollutants**
   - **Urban Heat Island (UHI)** metrics
   - **Land Cover** mapping & **Change Detection**
   - Custom AI models deployed on **Vertex AI** for certain land cover tasks

5. **RAG & Knowledge Base**
   - Enables a Retrieval-Augmented Generation (RAG) workflow.
   - Upload documents to build a local knowledge base.
   - The AI Assistant can then combine geospatial insights with custom document knowledge.


## Tech Stack ðŸ’»
- Next.js
- Google Cloud Platform (GCP):
   - Google Earth Engine (remote-sensing data invocation and processing)
   - Vertex AI (custom AI vision models)
   - Cloud Run
- Vercel AI
- OpenAI (ChatGPT API)
- Supabase (database and authentication)
- LangChain (RAG)
- Turf (for spatial operations)
- Maplibre GL (for displaying maps)

## Getting Started ðŸš€

1. Clone the repo

2. Install dependencies

   ```bash
   npm install
   ```

3. Create a Google Earth Engine (GEE) account and project, otherwise no analysis can be done. Note that GEE is currently only free for non-commercial use:
   - https://earthengine.google.com
   
5. Set up the environment variables

- Create a `.env.local` file (or similar) with the required credentials for:

  - Your base url:
     ```
     BASE_URL=http://localhost:3000   # Change it if you're using a different port. In production, you should set it to the url of the deployment. 
     ```
  - Google Cloud Platform (GCP):
    ```
      GOOGLE_MAPS_API_KEY=           # API key for Google maps. You can replace Google Maps with OSM if you want.
      VERTEXTAI_ENDPOINT_BASE_URL=   # Base URL if you use your own custom models.
      GEE_CLOUD_RUN_URL=             # URL for invoking a model hosted on VertexAI using cloud functions.
      GCP_BUCKET_NAME=               # Bucket name to store the land-cover map generated by your custom model (if applicable).
      GCP_SERVICE_ACCOUNT_KEY=       # Service Account key needed for GEE functions, depending on your GCP configurations. Make sure it has all the required permissions to use GEE.
    ```

  - Large Language Model (LLM) API Key:
    ```
    OPENAI_API_KEY=            # It shouldn't be necessarily OpenAI, thought. You can change it to any other API supported by Vercel AI SDK. However, you need to make some changes to the Chat API route.
    ```
  - For the database & authentication, the app uses Supabase. So you need the Supabase API keys as well:

        NEXT_PUBLIC_SUPABASE_URL=
        NEXT_PUBLIC_SUPABASE_ANON_KEY=

  - If you want Esri integration, you also need the following keys in your env (skip this part if you don't want this integration):

        ARCGIS_CLIENT_ID=
        ARCGIS_CLIENT_SECRET=
        ARCGIS_REDIRECT_URI=

- For feedback submission, I just used a simple email-based pipeline based on Mailgun (skip this part if you don't want this feature):

        MAILGUN_API_KEY=
        MAILGUN_DOMAIN=
        RECIPIENT_EMAIL=
        SENDER_EMAIL=

5. Run the develpment server

       npm run dev


Visit http://localhost:3000 to view the application.